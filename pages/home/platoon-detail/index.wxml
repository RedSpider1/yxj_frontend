<header title="友小聚 - 组队单详情" needReturn="{{true}}"></header>
<view class="container">

  <view class="title">
    {{title}}
  </view>
  <van-row>
    <van-col span="16">
      <view class="flex">
        <van-image round width="20" height="20" src="https://img.yzcdn.cn/vant/cat.jpeg" />
        <view class="author-name">{{authorName}}</view>
        <view>
          <van-icon name="star-o" class="tag-btn primary" size="20" />
          <!-- 收藏后变实心 -->
          <!-- <van-icon name="star" class="tag-btn primary" size="20" /> -->
          <van-icon name="share" class="tag-btn second" size="20" />
        </view>
      </view>
      <view class="small grey margin-v">发布于：{{examineTime}}</view>
      <view class="small grey flex margin-v" wx:if="{{countDownTime > 0 && countDownTime < 10 * 24 * 60 * 60 * 1000}}">
        <text>将于：</text>
        <van-count-down time="{{countDownTime}}" format="DD天HH时mm分ss秒" class="count-down" />
        <text>后截止</text>
      </view>
      <view class="small grey margin-v" wx:else>
        <text>已截止</text>
      </view>
    </van-col>
    <van-col span="8">
      <view class="flex justify-end">
        <view class="flex-col align-items-center">

          <view class="personRateDesc" style="color: {{personColor}};">{{personRateDesc}}</view>
          <van-circle value="{{personRate}}" size="60" stroke-width="4" style="--circle-text-color: {{personColor}}"
            layer-color="#eeeeee" color="{{personColor}}" text="{{statusDesc}}" />
        </view>
      </view>
    </van-col>
  </van-row>


  <view class="flex flex-wrap">
    <view class="small">标签：</view>
    <view wx:if="{{labelArray.length > 0}}">
      <view wx:for="{{labelArray}}" wx:key="key">
        <view class="label">
          <van-tag plain type="primary" style="--tag-primary-color: {{item.color}};">
            {{item.name}}
          </van-tag>
        </view>
      </view>
    </view>
    <view class="small" wx:else>无</view>
  </view>
  <van-divider></van-divider>
  <van-tabs type="card" active="detail" sticky animated swipeable line-height="0" color="{{primary}}">
    <van-tab title="详情" name="detail">
      <view class="container-v">
        <view>
          <view class="introduce">
            {{introduce}}
          </view>
        </view>
        <view class="margin-v">
          <van-image width="100" height="100" lazy-load src="{{item}}" wx:for="{{pictureUrlArray}}" wx:key="key"
            use-error-slot bindtap="enlargeImg" data-url="{{item}}">
            <text slot="error">加载失败</text>
          </van-image>
          <van-popup show="{{enlargeImg}}" bind:close="ensmallImg">
            <view>
              <van-image width="{{largeSize}}" height="{{largeSize}}" src="{{largeImg}}" lazy-load use-error-slot>
                <text slot="error">加载失败</text>
              </van-image>
            </view>
          </van-popup>
        </view>
      </view>
    </van-tab>
    <van-tab title="参与人" name="joined">
      <view class="container-v">
        <view wx:if="{{joinerInfos.length > 0}}">
          <view wx:for="{{joinerInfos}}" wx:key="key" class="flex justify-between margin-v">
            <view class="flex">
              <van-image round width="20" height="20" src="{{item.avatar}}" />
              <view class="author-name">{{item.name}}</view>
            </view>
            <view>{{item.type}}：{{item.contact}}</view>
          </view>
        </view>
        <view wx:else>
          <van-row>
            <van-col span="24" class="noJoiner">
              暂无参与者
            </van-col>
          </van-row>
        </view>
      </view>
    </van-tab>
    <van-tab title="记录" name="record">
      <view class="container-v">
        操作记录，记录参与、退出的记录
      </view>
    </van-tab>
    <van-tab title="评论" name="comment">
      <view class="container-v">
        评论
      </view>
    </van-tab>
  </van-tabs>

  <view class="flex flex-wrap justify-center btnGroup">
    <button class="btn operation primary-bg" wx:if="{{showBtn.join}}">参与</button>
    <button class="btn operation warning-bg" wx:if="{{showBtn.exit}}">退出</button>
    <button class="btn operation primary-bg" wx:if="{{showBtn.login}}">登录</button>
    <button class="btn operation primary-bg" wx:if="{{showBtn.postpone}}">延期</button>
    <button class="btn operation danger-bg" wx:if="{{showBtn.abandon}}">废弃</button>
    <button class="btn operation second-bg" wx:if="{{showBtn.edit}}">修改</button>
    <button class="btn operation primary-bg" wx:if="{{showBtn.pass}}">提前成功</button>
  </view>
</view>